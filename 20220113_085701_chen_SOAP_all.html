<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <title>20220113_085701_chen_SOAP_all</title>
    <script src="https://unpkg.com/gojs/release/go.js"
            integrity="sha384-bLrl9Obl8yhrwDOvrpFfCE4jZ64PXwCBWbfhDryYNbcejlvruipw2j1so+wIQ6ZN"
            crossorigin="anonymous"></script>
    <script type="text/javascript" src="map.js"></script>

    <script id="code">
        const map_dict = map;
        var seq_name = "20220113_085701_chen_SOAP_all";

        var param;
        var pos = document.URL.indexOf("?");
        if (pos != -1) {
            param = document.URL.substring(pos + 1);
            console.log("Parameters: " + param);
        }
        else param = "";

        function init() {
            var $ = go.GraphObject.make;
            var layoutSpacing = new go.Size(192, 108);
            var myDiagram = $(go.Diagram, 'myDiagramDiv', {
                layout: $(go.ForceDirectedLayout),
                // layout: $(go.GridLayout, { spacing: layoutSpacing } ),
                mouseDrop: function(e) { finishDrop(e, null); },
                "undoManager.isEnabled": true,
                "toolManager.hoverDelay": 100
            });

            // Hide tooltip when dragging
            var draggingTool = myDiagram.toolManager.draggingTool;
            draggingTool.doActivate = function() {
                myDiagram.toolManager.hideToolTip();
                go.DraggingTool.prototype.doActivate.call(draggingTool);
            }

            // Expand groups with only one immediate children
            function autoExpand() {
                myDiagram.nodes.each(function(n) {
                    if (n instanceof go.Group) {
                        if (n.data.key == "Unknown") { n.collapseSubGraph(); return; }
                        if (n.data.level == 0) { n.expandSubGraph(); return; }
                        var memberCount = 0;
                        n.memberParts.each(function(m) {
                            if (m instanceof go.Group || m instanceof go.Node) memberCount += 1;
                        })
                        if (memberCount <= 1) n.expandSubGraph();
                        else n.collapseSubGraph();
                    }
                });
            }

            // Highlight a Group that the selection may be dropped into
            function highlightGroup(e, grp, show) {
                if (!grp) return;
                e.handled = true;
                if (show) {
                    // cannot depend on the grp.diagram.selection in the case of external drag-and-drops;
                    // instead depend on the DraggingTool.draggedParts or .copiedParts
                    var tool = grp.diagram.toolManager.draggingTool;
                    var map = tool.draggedParts || tool.copiedParts;  // this is a Map
                    // now we can check to see if the Group will accept membership of the dragged Parts
                    if (grp.canAddMembers(map.toKeySet())) {
                        grp.isHighlighted = true;
                        return;
                    }
                }
                grp.isHighlighted = false;
            }

            // Highlight a node and its connected links by key
            function highlightNodeByKey(key) {
                var node = myDiagram.findNodeForKey(key);
                // for each Link coming out of the Node, set Link.isHighlighted
                node.findLinksConnected().each(function(l) { l.isHighlighted = true; });
                // set node as highlighted
                myDiagram.model.set(node.data, "highlighted", true);

                // set subgroup containing this node as highlighted
                var subgroup = myDiagram.findNodeForKey(node.data.group)
                myDiagram.model.set(subgroup.data, "highlighted", true);

                function flash() {
                    myDiagram.model.set(node.data, "highlighted", !node.data.highlighted);
                    myDiagram.model.set(subgroup.data, "highlighted", !subgroup.data.highlighted);
                }
                function loop() { setTimeout(function() { flash(); loop(); }, 500); }
                loop();
            }

            // Upon a drop onto a Group, we try to add the selection as members of the Group.
            // Upon a drop onto the background, or onto a top-level Node, make selection top-level.
            // If this is OK, we're done; otherwise we cancel the operation to rollback everything.
            function finishDrop(e, grp) {
                var ok = (grp !== null
                    ? grp.addMembers(grp.diagram.selection, true)
                    : e.diagram.commandHandler.addTopLevelParts(e.diagram.selection, true));
                if (!ok) e.diagram.currentTool.doCancel();
            }

            function mergeNode(e, node) {
                var newnode = e.diagram.selection.first();
                while (node.findLinksConnected().first()) {
                    var link = node.findLinksConnected().first()
                    var fromnode = link.fromNode;
                    var tonode = link.toNode;
                    var linkText = link.data.text;
                    var linkSize = link.data.size;
                    node.diagram.model.removeLinkData(link.data);
                    if (fromnode.key === tonode.key) {
                        node.diagram.model.addLinkData( { from: newnode.key, to: newnode.key, text: linkText, size: linkSize } );
                    } else if (fromnode.key === node.key) {
                        node.diagram.model.addLinkData( { from: newnode.key, to: tonode.key, text: linkText, size: linkSize } );
                    } else if (tonode.key === node.key) {
                        node.diagram.model.addLinkData( { from: fromnode.key, to: newnode.key, text: linkText, size: linkSize } );
                    }
                }
                myDiagram.remove(node);
            }

            function mergeGroup(selectedGroup, newGroup) {
                newGroup.addMembers(selectedGroup.memberParts, true);
                myDiagram.remove(selectedGroup)
            }

            myDiagram.nodeTemplate = $(go.Node, 'Auto',
                {
                    mouseDrop: function(e, node) { mergeNode(e, node); },
                    toolTip:
                    $("ToolTip",
                        $(go.Panel, "Vertical",
                        $(go.Picture, { margin: 3, width: 768, height: 432 },
                            new go.Binding("source", "key", convertNodeFullImage)),
                        )
                    )  // end Adornment
                },
                new go.Binding("click", "key", convertNodeURL),
                $(go.Shape, "Rectangle", { fill: null, strokeWidth: 6 },
                    new go.Binding("stroke", "", convertNodeStroke),
                ),
                $(go.Picture,
                    { width: 192, height: 108, background: null, imageStretch: go.GraphObject.Uniform },
                    new go.Binding("source", "key", convertNodeImage)
                )
            );

            myDiagram.groupTemplate = $(go.Group, "Auto",
                {
                    layout: $(go.ForceDirectedLayout),
                    // layout: $(go.GridLayout, { spacing: layoutSpacing } ),
                    ungroupable: true,
                    // highlight when dragging into the Group
                    mouseDragEnter: function(e, grp, prev) { highlightGroup(e, grp, true); },
                    mouseDragLeave: function(e, grp, next) { highlightGroup(e, grp, false); },
                    computesBoundsAfterDrag: true,
                    // when the selection is dropped into a Group, add the selected Parts into that Group;
                    // if it fails, cancel the tool, rolling back any changes
                    mouseDrop: function(e, grp) {
                        var selectedGroup = e.diagram.selection.first();
                        if (selectedGroup instanceof go.Group) {
                            if (selectedGroup.data.level == grp.data.level) { mergeGroup(selectedGroup, grp); }
                            else if (selectedGroup.data.level > grp.data.level) { finishDrop(e, grp); }
                            else { e.diagram.currentTool.doCancel(); }
                        } else if (selectedGroup instanceof go.Node) {
                            finishDrop(e, grp);
                        };
                    },
                    handlesDragDropForMembers: true,  // don't need to define handlers on member Nodes and Links
                    // Groups containing Groups lay out their members horizontally
                    toolTip:
                    $("ToolTip",
                        // new go.Binding("visible", "isSubGraphExpanded", inverter).ofObject(), // TODO: visible only when collapsed
                        new go.Binding("visible", "level", convertLevelVisible),
                        $(go.Panel, "Vertical",
                        $(go.Picture, { margin: 3, width: 768, height: 432 },
                            new go.Binding("source", "preview", convertNodeFullImage)),
                        )
                    )  // end Adornment
                },
                new go.Binding("background", "isHighlighted", function(h) {
                    return h ? "rgba(255,0,0,0.2)" : "transparent";
                }).ofObject(),
                $(go.Shape, "Rectangle",
                    { fill: null, strokeWidth: 2 },
                    new go.Binding("stroke", "", convertGroupColor)
                ),
                $(go.Panel, "Vertical",  // title above Placeholder
                    $(go.Panel, "Horizontal",  // button next to TextBlock
                        { stretch: go.GraphObject.Horizontal },
                        new go.Binding("background", "", convertGroupColor),
                        $("SubGraphExpanderButton",
                            { alignment: go.Spot.Right, margin: 5 } ),
                        $(go.TextBlock,
                            {
                                alignment: go.Spot.Left,
                                editable: true,
                                margin: 5,
                                font: "bold 16px sans-serif",
                                opacity: 0.75,  // allow some color to show through
                                stroke: "#404040"
                            },
                            new go.Binding("text", "key").makeTwoWay()
                        )
                    ),  // end Horizontal Panel
                    $(go.Placeholder,
                        { padding: 5, alignment: go.Spot.TopLeft } )
                )  // end Vertical Panel
            );

            myDiagram.linkTemplate = $(go.Link,
                {
                    curve: go.Link.Bezier,
                    toolTip:
                    $("ToolTip",
                        // tooltip visible only when link is click event
                        new go.Binding("visible", "", convertLinkTooltipVisible),
                        $(go.Panel, "Vertical",
                        $(go.Picture, { margin: 3, width: 768, height: 432 },
                            new go.Binding("source", "", convertLinkFullImage)),
                        )
                    )  // end Adornment
                },
                new go.Binding("click", "", convertLinkURL),
                $(go.Shape,
                    // the Shape.stroke color depends on whether Link.isHighlighted is true
                    new go.Binding("stroke", "isHighlighted", function(h) { return h ? "red" : "black"; }).ofObject(),
                    // the Shape.strokeWidth depends on whether Link.isHighlighted is true
                    new go.Binding("strokeWidth", "isHighlighted", function(h) { return h ? 3 : 1; }).ofObject()
                ),
                $(go.Shape,
                    { toArrow: "Standard", strokeWidth: 0 },
                    // the Shape.fill color depends on whether Link.isHighlighted is true
                    new go.Binding("fill", "isHighlighted", function(h) { return h ? "red" : "black"; }).ofObject(),
                    new go.Binding("scale", "isHighlighted", function(h) { return h ? 2 : 1; }).ofObject(),
                ),
                $(go.Panel, "Auto",
                    $(go.Shape, "Rectangle",
                        { fill: "white", stroke: "lightgray" },
                        new go.Binding("visible", "text", function(text) { return (text != null); }),
                    ),
                    $(go.TextBlock, { margin: 3, opacity: 1., font: "bold 14pt Courier New" },
                        new go.Binding("text", "text")),
                    $(go.Picture, { segmentOffset: new go.Point(0, 0) },
                        { width: 192, height: 35, background: null, imageStretch: go.GraphObject.Uniform },
                        new go.Binding("source", "", convertLinkImage),
                    ),
                )
            );

            myDiagram.model = new go.GraphLinksModel([
                { key: "Unknown", isGroup: true, level: 2 },
                { key: "000000", group: "CC_Soap-00", tag: null },
                { key: "CC_Soap-00", preview: "000000", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "CC_Soap", preview: "000000", isGroup: true, level: 0 },
                { key: "000002", group: "CC_Soap-00", tag: null },
                { key: "000004", group: "CC_Soap-00", tag: null },
                { key: "000005", group: "CC_Soap-00", tag: null },
                { key: "000021", group: "CC_Soap-00", tag: null },
                { key: "000025", group: "CC_Soap-00", tag: null },
                { key: "000031", group: "CC_Soap-00", tag: null },
                { key: "000041", group: "CC_Soap-00", tag: null },
                { key: "000050", group: "CC_Soap-00", tag: null },
                { key: "000053", group: "CC_Soap-00", tag: null },
                { key: "000073", group: "CC_Soap-00", tag: null },
                { key: "000109", group: "CC_Soap-00", tag: null },
                { key: "000114", group: "CC_Soap-00", tag: null },
                { key: "000118", group: "CC_Soap-00", tag: null },
                { key: "000171", group: "CC_Soap-00", tag: null },
                { key: "000174", group: "CC_Soap-00", tag: null },
                { key: "000177", group: "CC_Soap-00", tag: null },
                { key: "000178", group: "CC_Soap-00", tag: null },
                { key: "000188", group: "CC_Soap-00", tag: null },
                { key: "000190", group: "CC_Soap-00", tag: null },
                { key: "000192", group: "CC_Soap-00", tag: null },
                { key: "000198", group: "CC_Soap-00", tag: null },
                { key: "000229", group: "CC_Soap-00", tag: null },
                { key: "000231", group: "CC_Soap-00", tag: null },
                { key: "000234", group: "CC_Soap-00", tag: null },
                { key: "000243", group: "CC_Soap-00", tag: null },
                { key: "000246", group: "CC_Soap-00", tag: null },
                { key: "000248", group: "CC_Soap-00", tag: null },
                { key: "000250", group: "CC_Soap-00", tag: null },
                { key: "000268", group: "CC_Soap-00", tag: null },
                { key: "000271", group: "CC_Soap-00", tag: null },
                { key: "000273", group: "CC_Soap-00", tag: null },
                { key: "000275", group: "CC_Soap-00", tag: null },
                { key: "000277", group: "CC_Soap-00", tag: null },
                { key: "000282", group: "CC_Soap-00", tag: null },
                { key: "000287", group: "CC_Soap-00", tag: null },
                { key: "000289", group: "CC_Soap-00", tag: null },
                { key: "000292", group: "CC_Soap-00", tag: null },
                { key: "000297", group: "CC_Soap-00", tag: null },
                { key: "000307", group: "CC_Soap-00", tag: null },
                { key: "000309", group: "CC_Soap-00", tag: null },
                { key: "000319", group: "CC_Soap-00", tag: null },
                { key: "000331", group: "CC_Soap-00", tag: null },
                { key: "000332", group: "CC_Soap-00", tag: null },
                { key: "000334", group: "CC_Soap-00", tag: null },
                { key: "000338", group: "CC_Soap-00", tag: null },
                { key: "000341", group: "CC_Soap-00", tag: null },
                { key: "000342", group: "CC_Soap-00", tag: null },
                { key: "000366", group: "CC_Soap-00", tag: null },
                { key: "000372", group: "CC_Soap-00", tag: null },
                { key: "000375", group: "CC_Soap-00", tag: null },
                { key: "000388", group: "CC_Soap-00", tag: null },
                { key: "000390", group: "CC_Soap-00", tag: null },
                { key: "000392", group: "CC_Soap-00", tag: null },
                { key: "000006", group: "CC_Patients-00", tag: null },
                { key: "CC_Patients-00", preview: "000006", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "CC_Patients", preview: "000006", isGroup: true, level: 0 },
                { key: "000007", group: "CC_Patients-00", tag: null },
                { key: "000008", group: "CC_Patients-00", tag: null },
                { key: "000009", group: "CC_Patients-00", tag: null },
                { key: "000010", group: "CC_Patients-00", tag: null },
                { key: "000011", group: "CC_Patients-00", tag: null },
                { key: "000012", group: "CC_Patients-00", tag: null },
                { key: "000013", group: "CC_Patients-00", tag: null },
                { key: "000014", group: "CC_Patients-00", tag: null },
                { key: "000015", group: "CC_Patients-00", tag: null },
                { key: "000032", group: "CC_Patients-00", tag: null },
                { key: "000033", group: "CC_Patients-00", tag: null },
                { key: "000034", group: "CC_Patients-00", tag: null },
                { key: "000035", group: "CC_Patients-00", tag: null },
                { key: "000036", group: "CC_Patients-00", tag: null },
                { key: "000037", group: "CC_Patients-00", tag: null },
                { key: "000038", group: "CC_Patients-00", tag: null },
                { key: "000039", group: "CC_Patients-00", tag: null },
                { key: "000040", group: "CC_Patients-00", tag: null },
                { key: "000051", group: "CC_Patients-00", tag: null },
                { key: "000052", group: "CC_Patients-00", tag: null },
                { key: "000074", group: "CC_Patients-00", tag: null },
                { key: "000075", group: "CC_Patients-00", tag: null },
                { key: "000076", group: "CC_Patients-00", tag: null },
                { key: "000077", group: "CC_Patients-00", tag: null },
                { key: "000078", group: "CC_Patients-00", tag: null },
                { key: "000079", group: "CC_Patients-00", tag: null },
                { key: "000080", group: "CC_Patients-00", tag: null },
                { key: "000081", group: "CC_Patients-00", tag: null },
                { key: "000082", group: "CC_Patients-00", tag: null },
                { key: "000083", group: "CC_Patients-00", tag: null },
                { key: "000084", group: "CC_Patients-00", tag: null },
                { key: "000085", group: "CC_Patients-00", tag: null },
                { key: "000086", group: "CC_Patients-00", tag: null },
                { key: "000087", group: "CC_Patients-00", tag: null },
                { key: "000088", group: "CC_Patients-00", tag: null },
                { key: "000089", group: "CC_Patients-00", tag: null },
                { key: "000090", group: "CC_Patients-00", tag: null },
                { key: "000091", group: "CC_Patients-00", tag: null },
                { key: "000092", group: "CC_Patients-00", tag: null },
                { key: "000093", group: "CC_Patients-00", tag: null },
                { key: "000094", group: "CC_Patients-00", tag: null },
                { key: "000095", group: "CC_Patients-00", tag: null },
                { key: "000096", group: "CC_Patients-00", tag: null },
                { key: "000097", group: "CC_Patients-00", tag: null },
                { key: "000098", group: "CC_Patients-00", tag: null },
                { key: "000099", group: "CC_Patients-00", tag: null },
                { key: "000100", group: "CC_Patients-00", tag: null },
                { key: "000101", group: "CC_Patients-00", tag: null },
                { key: "000102", group: "CC_Patients-00", tag: null },
                { key: "000103", group: "CC_Patients-00", tag: null },
                { key: "000104", group: "CC_Patients-00", tag: null },
                { key: "000105", group: "CC_Patients-00", tag: null },
                { key: "000106", group: "CC_Patients-00", tag: null },
                { key: "000107", group: "CC_Patients-00", tag: null },
                { key: "000110", group: "CC_Patients-00", tag: null },
                { key: "000111", group: "CC_Patients-00", tag: null },
                { key: "000112", group: "CC_Patients-00", tag: null },
                { key: "000113", group: "CC_Patients-00", tag: null },
                { key: "000119", group: "CC_Patients-00", tag: null },
                { key: "000120", group: "CC_Patients-00", tag: null },
                { key: "000121", group: "CC_Patients-00", tag: null },
                { key: "000122", group: "CC_Patients-00", tag: null },
                { key: "000123", group: "CC_Patients-00", tag: null },
                { key: "000124", group: "CC_Patients-00", tag: null },
                { key: "000125", group: "CC_Patients-00", tag: null },
                { key: "000126", group: "CC_Patients-00", tag: null },
                { key: "000127", group: "CC_Patients-00", tag: null },
                { key: "000128", group: "CC_Patients-00", tag: null },
                { key: "000129", group: "CC_Patients-00", tag: null },
                { key: "000130", group: "CC_Patients-00", tag: null },
                { key: "000131", group: "CC_Patients-00", tag: null },
                { key: "000132", group: "CC_Patients-00", tag: null },
                { key: "000133", group: "CC_Patients-00", tag: null },
                { key: "000134", group: "CC_Patients-00", tag: null },
                { key: "000135", group: "CC_Patients-00", tag: null },
                { key: "000136", group: "CC_Patients-00", tag: null },
                { key: "000137", group: "CC_Patients-00", tag: null },
                { key: "000138", group: "CC_Patients-00", tag: null },
                { key: "000139", group: "CC_Patients-00", tag: null },
                { key: "000140", group: "CC_Patients-00", tag: null },
                { key: "000141", group: "CC_Patients-00", tag: null },
                { key: "000142", group: "CC_Patients-00", tag: null },
                { key: "000143", group: "CC_Patients-00", tag: null },
                { key: "000144", group: "CC_Patients-00", tag: null },
                { key: "000145", group: "CC_Patients-00", tag: null },
                { key: "000146", group: "CC_Patients-00", tag: null },
                { key: "000147", group: "CC_Patients-00", tag: null },
                { key: "000148", group: "CC_Patients-00", tag: null },
                { key: "000149", group: "CC_Patients-00", tag: null },
                { key: "000150", group: "CC_Patients-00", tag: null },
                { key: "000152", group: "CC_Patients-00", tag: null },
                { key: "000154", group: "CC_Patients-00", tag: null },
                { key: "000155", group: "CC_Patients-00", tag: null },
                { key: "000156", group: "CC_Patients-00", tag: null },
                { key: "000157", group: "CC_Patients-00", tag: null },
                { key: "000158", group: "CC_Patients-00", tag: null },
                { key: "000159", group: "CC_Patients-00", tag: null },
                { key: "000160", group: "CC_Patients-00", tag: null },
                { key: "000161", group: "CC_Patients-00", tag: null },
                { key: "000162", group: "CC_Patients-00", tag: null },
                { key: "000163", group: "CC_Patients-00", tag: null },
                { key: "000164", group: "CC_Patients-00", tag: null },
                { key: "000165", group: "CC_Patients-00", tag: null },
                { key: "000166", group: "CC_Patients-00", tag: null },
                { key: "000167", group: "CC_Patients-00", tag: null },
                { key: "000168", group: "CC_Patients-00", tag: null },
                { key: "000169", group: "CC_Patients-00", tag: null },
                { key: "000179", group: "CC_Patients-00", tag: null },
                { key: "000180", group: "CC_Patients-00", tag: null },
                { key: "000181", group: "CC_Patients-00", tag: null },
                { key: "000183", group: "CC_Patients-00", tag: null },
                { key: "000184", group: "CC_Patients-00", tag: null },
                { key: "000185", group: "CC_Patients-00", tag: null },
                { key: "000186", group: "CC_Patients-00", tag: null },
                { key: "000189", group: "CC_Patients-00", tag: null },
                { key: "000193", group: "CC_Patients-00", tag: null },
                { key: "000194", group: "CC_Patients-00", tag: null },
                { key: "000195", group: "CC_Patients-00", tag: null },
                { key: "000196", group: "CC_Patients-00", tag: null },
                { key: "000197", group: "CC_Patients-00", tag: null },
                { key: "000249", group: "CC_Patients-00", tag: null },
                { key: "000283", group: "CC_Patients-00", tag: null },
                { key: "000284", group: "CC_Patients-00", tag: null },
                { key: "000285", group: "CC_Patients-00", tag: null },
                { key: "000286", group: "CC_Patients-00", tag: null },
                { key: "000290", group: "CC_Patients-00", tag: null },
                { key: "000298", group: "CC_Patients-00", tag: null },
                { key: "000299", group: "CC_Patients-00", tag: null },
                { key: "000300", group: "CC_Patients-00", tag: null },
                { key: "000301", group: "CC_Patients-00", tag: null },
                { key: "000302", group: "CC_Patients-00", tag: null },
                { key: "000303", group: "CC_Patients-00", tag: null },
                { key: "000304", group: "CC_Patients-00", tag: null },
                { key: "000343", group: "CC_Patients-00", tag: null },
                { key: "000344", group: "CC_Patients-00", tag: null },
                { key: "000345", group: "CC_Patients-00", tag: null },
                { key: "000348", group: "CC_Patients-00", tag: null },
                { key: "000349", group: "CC_Patients-00", tag: null },
                { key: "000350", group: "CC_Patients-00", tag: null },
                { key: "000351", group: "CC_Patients-00", tag: null },
                { key: "000352", group: "CC_Patients-00", tag: null },
                { key: "000353", group: "CC_Patients-00", tag: null },
                { key: "000354", group: "CC_Patients-00", tag: null },
                { key: "000355", group: "CC_Patients-00", tag: null },
                { key: "000356", group: "CC_Patients-00", tag: null },
                { key: "000357", group: "CC_Patients-00", tag: null },
                { key: "000358", group: "CC_Patients-00", tag: null },
                { key: "000359", group: "CC_Patients-00", tag: null },
                { key: "000360", group: "CC_Patients-00", tag: null },
                { key: "000361", group: "CC_Patients-00", tag: null },
                { key: "000362", group: "CC_Patients-00", tag: null },
                { key: "000363", group: "CC_Patients-00", tag: null },
                { key: "000364", group: "CC_Patients-00", tag: null },
                { key: "000365", group: "CC_Patients-00", tag: null },
                { key: "000378", group: "CC_Patients-00", tag: null },
                { key: "000379", group: "CC_Patients-00", tag: null },
                { key: "000380", group: "CC_Patients-00", tag: null },
                { key: "000381", group: "CC_Patients-00", tag: null },
                { key: "000382", group: "CC_Patients-00", tag: null },
                { key: "000383", group: "CC_Patients-00", tag: null },
                { key: "000384", group: "CC_Patients-00", tag: null },
                { key: "000385", group: "CC_Patients-00", tag: null },
                { key: "000386", group: "CC_Patients-00", tag: null },
                { key: "000016", group: "CC_Tocc-00", tag: null },
                { key: "CC_Tocc-00", preview: "000016", isGroup: true, level: 1, group: "CC_Tocc" },
                { key: "CC_Tocc", preview: "000016", isGroup: true, level: 0 },
                { key: "000017", group: "CC_Tocc-01", tag: null },
                { key: "CC_Tocc-01", preview: "000017", isGroup: true, level: 1, group: "CC_Tocc" },
                { key: "000018", group: "CC_Tocc-02", tag: null },
                { key: "CC_Tocc-02", preview: "000018", isGroup: true, level: 1, group: "CC_Tocc" },
                { key: "000019", group: "CC_Tocc-03", tag: null },
                { key: "CC_Tocc-03", preview: "000019", isGroup: true, level: 1, group: "CC_Tocc" },
                { key: "000020", group: "CC_Tocc-04", tag: null },
                { key: "CC_Tocc-04", preview: "000020", isGroup: true, level: 1, group: "CC_Tocc" },
                { key: "000108", group: "CC_Tocc-05", tag: null },
                { key: "CC_Tocc-05", preview: "000108", isGroup: true, level: 1, group: "CC_Tocc" },
                { key: "000022", group: "CC_WriteCard-00", tag: null },
                { key: "CC_WriteCard-00", preview: "000022", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "CC_WriteCard", preview: "000022", isGroup: true, level: 0 },
                { key: "000023", group: "CC_WriteCard-01", tag: null },
                { key: "CC_WriteCard-01", preview: "000023", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000024", group: "CC_WriteCard-02", tag: null },
                { key: "CC_WriteCard-02", preview: "000024", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000170", group: "CC_WriteCard-03", tag: null },
                { key: "CC_WriteCard-03", preview: "000170", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000187", group: "CC_WriteCard-04", tag: null },
                { key: "CC_WriteCard-04", preview: "000187", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000235", group: "CC_WriteCard-05", tag: null },
                { key: "CC_WriteCard-05", preview: "000235", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000236", group: "CC_WriteCard-06", tag: null },
                { key: "CC_WriteCard-06", preview: "000236", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000237", group: "CC_WriteCard-07", tag: null },
                { key: "CC_WriteCard-07", preview: "000237", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000238", group: "CC_WriteCard-08", tag: null },
                { key: "CC_WriteCard-08", preview: "000238", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000239", group: "CC_WriteCard-09", tag: null },
                { key: "CC_WriteCard-09", preview: "000239", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000240", group: "CC_WriteCard-10", tag: null },
                { key: "CC_WriteCard-10", preview: "000240", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000241", group: "CC_WriteCard-11", tag: null },
                { key: "CC_WriteCard-11", preview: "000241", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000242", group: "CC_WriteCard-12", tag: null },
                { key: "CC_WriteCard-12", preview: "000242", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000247", group: "CC_WriteCard-13", tag: null },
                { key: "CC_WriteCard-13", preview: "000247", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000269", group: "CC_WriteCard-14", tag: null },
                { key: "CC_WriteCard-14", preview: "000269", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000270", group: "CC_WriteCard-15", tag: null },
                { key: "CC_WriteCard-15", preview: "000270", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000272", group: "CC_WriteCard-16", tag: null },
                { key: "CC_WriteCard-16", preview: "000272", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000276", group: "CC_WriteCard-17", tag: null },
                { key: "CC_WriteCard-17", preview: "000276", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000291", group: "CC_WriteCard-18", tag: null },
                { key: "CC_WriteCard-18", preview: "000291", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000308", group: "CC_WriteCard-19", tag: null },
                { key: "CC_WriteCard-19", preview: "000308", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000320", group: "CC_WriteCard-20", tag: null },
                { key: "CC_WriteCard-20", preview: "000320", isGroup: true, level: 1, group: "CC_WriteCard" },
                { key: "000336", group: "CC_OpdReport-00", tag: null },
                { key: "CC_OpdReport-00", preview: "000336", isGroup: true, level: 1, group: "CC_OpdReport" },
                { key: "CC_OpdReport", preview: "000336", isGroup: true, level: 0 },
                { key: "000377", group: "CC_OpdReport-01", tag: null },
                { key: "CC_OpdReport-01", preview: "000377", isGroup: true, level: 1, group: "CC_OpdReport" },
        ], [
                { from: "000000", to: "Unknown", text: null },
                { from: "Unknown", to: "000002", text: null },
                { from: "000002", to: "Unknown", text: null },
                { from: "Unknown", to: "000004", text: null },
                { from: "000005", to: "000006", text: null },
                { from: "000006", to: "000007", text: null },
                { from: "000007", to: "000008", text: null },
                { from: "000008", to: "000009", text: null },
                { from: "000009", to: "000010", text: null },
                { from: "000010", to: "000011", text: null },
                { from: "000011", to: "000012", text: "s⌫␣⌃␣⌃" },
                { from: "000012", to: "000013", text: null },
                { from: "000013", to: "000014", text: null },
                { from: "000014", to: "000015", text: "u04⌫⌫⌫⇧y94eoji3⌫⌫y94eo3ji3ap7u␣h4⏎←←←⌦⇲su3ap72k75;4cl4⏎<188>⌃fu06xu;3wu0␣ru8␣zp␣c96y94jp4⏎⏎" },
                { from: "000015", to: "000016", text: null },
                { from: "000016", to: "000017", text: null },
                { from: "000017", to: "000018", text: null },
                { from: "000018", to: "000019", text: null },
                { from: "000019", to: "000020", text: "u.3i␣⏎⏎" },
                { from: "000020", to: "000021", text: null },
                { from: "000021", to: "000022", text: null },
                { from: "000022", to: "000023", text: null },
                { from: "000023", to: "000024", text: null },
                { from: "000024", to: "000025", text: null },
                { from: "000031", to: "000032", text: null },
                { from: "000032", to: "000033", text: null },
                { from: "000033", to: "000034", text: null },
                { from: "000034", to: "000035", text: null },
                { from: "000035", to: "000036", text: null },
                { from: "000036", to: "000037", text: null },
                { from: "000037", to: "000038", text: null },
                { from: "000038", to: "000039", text: "ru8␣↓↓↓⏎⏎" },
                { from: "000039", to: "000040", text: null },
                { from: "000040", to: "000041", text: null },
                { from: "000050", to: "000051", text: "5j035;4c.4ep␣su3ap7gji␣i␣⏎⏎" },
                { from: "000051", to: "000052", text: null },
                { from: "000052", to: "000053", text: null },
                { from: "000073", to: "000074", text: null },
                { from: "000074", to: "000075", text: null },
                { from: "000075", to: "000076", text: null },
                { from: "000076", to: "000077", text: null },
                { from: "000077", to: "000078", text: null },
                { from: "000078", to: "000079", text: null },
                { from: "000079", to: "000080", text: null },
                { from: "000080", to: "000081", text: "ru/4↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↑↑↑↑↑↑↑↑↑↑↑↑↑↑⏎⏎" },
                { from: "000081", to: "000082", text: null },
                { from: "000082", to: "000083", text: null },
                { from: "000083", to: "000084", text: null },
                { from: "000084", to: "000085", text: null },
                { from: "000085", to: "000086", text: "xl3184rup␣wu0␣cjo65p3⏎⏎" },
                { from: "000086", to: "000087", text: null },
                { from: "000087", to: "000088", text: null },
                { from: "000088", to: "000089", text: "rup⌫⌫⌫⌫␣⌃a8␣a8␣yjo4rup454j;4⌫⌫vrup41j4cp32ji␣⌃,gji␣dk3" },
                { from: "000089", to: "000090", text: null },
                { from: "000090", to: "000091", text: "8a␣⌫⌫⌫⌫␣␣⌃a8␣⌫⌫⌫⇧a8␣⌫⌫⌫⌫␣⌃a8⌫⌫⌫" },
                { from: "000091", to: "000092", text: null },
                { from: "000092", to: "000093", text: null },
                { from: "000093", to: "000094", text: null },
                { from: "000094", to: "000095", text: null },
                { from: "000095", to: "000096", text: null },
                { from: "000096", to: "000097", text: "a8␣a8␣yjo4rup4rup41j4cp32ji␣←↓⏎⏎⌃,gfji␣dk3u3yji4fu3x96←←←↓⏎⏎<188>⌃g;␣d.3u,31j6hji4⏎⌃,vup␣fu/6cp3cl3⏎⏎cl3uv;ll␣vu6⏎<188>⌃nji23u3sup6zj4fup4⌫⌫zj4fup␣⏎rup␣uw0␣⏎cp3z;4nj/␣⏎⏎" },
                { from: "000097", to: "000098", text: null },
                { from: "000098", to: "000099", text: null },
                { from: "000099", to: "000100", text: null },
                { from: "000100", to: "000101", text: null },
                { from: "000101", to: "000102", text: "⌃v" },
                { from: "000102", to: "000103", text: null },
                { from: "000103", to: "000104", text: "u3⏎⏎" },
                { from: "000104", to: "000105", text: null },
                { from: "000105", to: "000106", text: null },
                { from: "000106", to: "000107", text: null },
                { from: "000107", to: "000108", text: null },
                { from: "000108", to: "000109", text: null },
                { from: "000109", to: "000110", text: null },
                { from: "000110", to: "000111", text: null },
                { from: "000111", to: "000112", text: null },
                { from: "000112", to: "000113", text: null },
                { from: "000113", to: "000114", text: null },
                { from: "000118", to: "000119", text: null },
                { from: "000119", to: "000120", text: null },
                { from: "000120", to: "000121", text: null },
                { from: "000121", to: "000122", text: "10⇧;30␣⇧/⌫" },
                { from: "000122", to: "000123", text: null },
                { from: "000123", to: "000124", text: null },
                { from: "000124", to: "000125", text: null },
                { from: "000125", to: "000126", text: null },
                { from: "000126", to: "000127", text: null },
                { from: "000127", to: "000128", text: "fu/3fu061o⌫⌫⌫dk45;3284g/␣⌫⌫⌫⌫⌫" },
                { from: "000128", to: "000129", text: null },
                { from: "000129", to: "000130", text: null },
                { from: "000130", to: "000131", text: null },
                { from: "000131", to: "000132", text: null },
                { from: "000132", to: "000133", text: null },
                { from: "000133", to: "000134", text: null },
                { from: "000134", to: "000135", text: null },
                { from: "000135", to: "000136", text: null },
                { from: "000136", to: "000137", text: null },
                { from: "000137", to: "000138", text: null },
                { from: "000138", to: "000139", text: null },
                { from: "000139", to: "000140", text: null },
                { from: "000140", to: "000141", text: null },
                { from: "000141", to: "000142", text: null },
                { from: "000142", to: "000143", text: null },
                { from: "000143", to: "000144", text: null },
                { from: "000144", to: "000145", text: null },
                { from: "000145", to: "000146", text: null },
                { from: "000146", to: "000147", text: null },
                { from: "000147", to: "000148", text: null },
                { from: "000148", to: "000149", text: null },
                { from: "000149", to: "000150", text: null },
                { from: "000150", to: "Unknown", text: null },
                { from: "Unknown", to: "000152", text: null },
                { from: "000152", to: "Unknown", text: null },
                { from: "Unknown", to: "000154", text: null },
                { from: "000154", to: "000155", text: null },
                { from: "000155", to: "000156", text: null },
                { from: "000156", to: "000157", text: null },
                { from: "000157", to: "000158", text: null },
                { from: "000158", to: "000159", text: null },
                { from: "000159", to: "000160", text: null },
                { from: "000160", to: "000161", text: null },
                { from: "000161", to: "000162", text: null },
                { from: "000162", to: "000163", text: "p⌫tjp⌫⌫⌫␣⌃tjp6⏎" },
                { from: "000163", to: "000164", text: null },
                { from: "000164", to: "000165", text: null },
                { from: "000165", to: "000166", text: null },
                { from: "000166", to: "000167", text: null },
                { from: "000167", to: "000168", text: null },
                { from: "000168", to: "000169", text: "A⇧RUB⇧A⇧␣m⌫⌃␣may⌫⌫⌫M⇧ay␣⌃y94fu/3⏎el␣j5j0␣vu,65j4vmp6jp4<188>⌃dk3u3a8␣⇧/⏎⏎" },
                { from: "000169", to: "000170", text: null },
                { from: "000170", to: "000171", text: null },
                { from: "000174", to: "Unknown", text: null },
                { from: "Unknown", to: "000177", text: null },
                { from: "000178", to: "000179", text: null },
                { from: "000179", to: "000180", text: null },
                { from: "000180", to: "000181", text: null },
                { from: "000181", to: "Unknown", text: null },
                { from: "Unknown", to: "000183", text: null },
                { from: "000183", to: "000184", text: null },
                { from: "000184", to: "000185", text: "e⌫␣⌃e03p␣⏎" },
                { from: "000185", to: "000186", text: null },
                { from: "000186", to: "000187", text: null },
                { from: "000187", to: "000188", text: null },
                { from: "000188", to: "000189", text: null },
                { from: "000189", to: "000190", text: null },
                { from: "000190", to: "Unknown", text: null },
                { from: "Unknown", to: "000192", text: null },
                { from: "000192", to: "000193", text: null },
                { from: "000193", to: "000194", text: null },
                { from: "000194", to: "000195", text: null },
                { from: "000195", to: "000196", text: null },
                { from: "000196", to: "000197", text: null },
                { from: "000197", to: "000198", text: "OK⇧⏎" },
                { from: "000198", to: "Unknown", text: null },
                { from: "Unknown", to: "000229", text: null },
                { from: "000229", to: "Unknown", text: null },
                { from: "Unknown", to: "000231", text: null },
                { from: "000234", to: "000235", text: null },
                { from: "000235", to: "000236", text: null },
                { from: "000236", to: "000237", text: null },
                { from: "000237", to: "000238", text: null },
                { from: "000238", to: "000239", text: "1l4el4m,4x96m,4gjp4t;4xk7⏎" },
                { from: "000239", to: "000240", text: null },
                { from: "000240", to: "000241", text: "⌃x" },
                { from: "000241", to: "000242", text: null },
                { from: "000242", to: "000243", text: null },
                { from: "000246", to: "000247", text: null },
                { from: "000247", to: "000248", text: null },
                { from: "000248", to: "000249", text: "⌫<188>⌃1j6hji4i␣⏎⇧1⏎⏎" },
                { from: "000249", to: "000250", text: null },
                { from: "000268", to: "000269", text: null },
                { from: "000269", to: "000270", text: null },
                { from: "000270", to: "000271", text: null },
                { from: "000271", to: "000272", text: "ele␣l⌫el␣el␣⌫⌫e;␣e;␣⏎ej4jp4⌫⌫el␣5j0␣jp4⇧A⇧RUB⇧A⇧⏎vu84⌫⌫⌫⌫␣next␣W⇧1␣␣⌃h96cjo61l4⏎⏎" },
                { from: "000272", to: "000273", text: null },
                { from: "000275", to: "000276", text: null },
                { from: "000276", to: "000277", text: null },
                { from: "000282", to: "000283", text: null },
                { from: "000283", to: "000284", text: "⎋" },
                { from: "000284", to: "000285", text: null },
                { from: "000285", to: "000286", text: null },
                { from: "000286", to: "000287", text: null },
                { from: "000289", to: "000290", text: "ji3ep␣ru8␣zp␣gji␣x96tj3xu3⌫⌫⌫⌫⏎⌫⌫ru8␣zp␣gji␣⏎⏎1j6m/4t9␣⏎⏎" },
                { from: "000290", to: "000291", text: null },
                { from: "000291", to: "000292", text: null },
                { from: "000297", to: "000298", text: "r⌫␣⌃ru8␣↓↓↓⏎⏎" },
                { from: "000298", to: "000299", text: null },
                { from: "000299", to: "000300", text: null },
                { from: "000300", to: "000301", text: null },
                { from: "000301", to: "000302", text: "m03rm4⏎␣cl3vu0␣⌫⌫c9␣vu0␣⌫⌫c93vu0␣⏎x/32cmd_rj/4⎋⌫⏎" },
                { from: "000302", to: "000303", text: null },
                { from: "000303", to: "000304", text: null },
                { from: "000304", to: "Unknown", text: null },
                { from: "Unknown", to: "000307", text: null },
                { from: "000307", to: "000308", text: null },
                { from: "000308", to: "000309", text: null },
                { from: "000319", to: "000320", text: null },
                { from: "000320", to: "Unknown", text: null },
                { from: "Unknown", to: "000331", text: null },
                { from: "000332", to: "Unknown", text: null },
                { from: "Unknown", to: "000334", text: null },
                { from: "000334", to: "Unknown", text: null },
                { from: "Unknown", to: "000336", text: null },
                { from: "000336", to: "Unknown", text: null },
                { from: "Unknown", to: "000338", text: null },
                { from: "000338", to: "Unknown", text: null },
                { from: "Unknown", to: "000341", text: null },
                { from: "000342", to: "000343", text: null },
                { from: "000343", to: "000344", text: null },
                { from: "000344", to: "000345", text: null },
                { from: "000345", to: "Unknown", text: null },
                { from: "Unknown", to: "000348", text: null },
                { from: "000348", to: "000349", text: null },
                { from: "000349", to: "000350", text: null },
                { from: "000350", to: "000351", text: null },
                { from: "000351", to: "000352", text: null },
                { from: "000352", to: "000353", text: null },
                { from: "000353", to: "000354", text: null },
                { from: "000354", to: "000355", text: null },
                { from: "000355", to: "000356", text: null },
                { from: "000356", to: "000357", text: null },
                { from: "000357", to: "000358", text: null },
                { from: "000358", to: "000359", text: null },
                { from: "000359", to: "000360", text: null },
                { from: "000360", to: "000361", text: null },
                { from: "000361", to: "000362", text: null },
                { from: "000362", to: "000363", text: null },
                { from: "000363", to: "000364", text: null },
                { from: "000364", to: "000365", text: null },
                { from: "000365", to: "000366", text: null },
                { from: "000372", to: "Unknown", text: null },
                { from: "Unknown", to: "000375", text: null },
                { from: "000375", to: "Unknown", text: null },
                { from: "Unknown", to: "000377", text: null },
                { from: "000377", to: "000378", text: null },
                { from: "000378", to: "000379", text: null },
                { from: "000379", to: "000380", text: null },
                { from: "000380", to: "000381", text: null },
                { from: "000381", to: "000382", text: null },
                { from: "000382", to: "000383", text: null },
                { from: "000383", to: "000384", text: null },
                { from: "000384", to: "000385", text: null },
                { from: "000385", to: "000386", text: null },
                { from: "000386", to: "Unknown", text: null },
                { from: "Unknown", to: "000388", text: null },
                { from: "000390", to: "Unknown", text: null },
                { from: "Unknown", to: "000392", text: null },
            ]);

            autoExpand();
            if (param != "") highlightNodeByKey(param);
        }

        function convertLevelVisible(level) {
            if (level == 1) { return true }
            else if (level == 0) { return false }
            else { return false }
        }

        function convertGroupColor(data) {
            if (data.highlighted) { return "red" }
            if (data.level == 0) { return "#33D3E5" }
            else if (data.level == 1) { return "#FFDD33" }
            else if (data.level == 2) { return "#ACE600" }
            else { return "#000000" }
        }

        function convertNodeImage(key) {
            if (key == null) return "";
            else return "imgs/nodes/f" + key + "_node.png";
        }

        function convertNodeFullImage(key) {
            if (key == null) return "";
            else return "imgs/nodes/f" + key + "_full.png";
        }

        function convertNodeURL(key) {
            if (key == null) return null;
            if (map_dict[parseInt(key)] && seq_name.includes("_all")) return function() {
                window.open(map_dict[parseInt(key)][0] + ".html");
            }
            else return function() {
                window.open("imgs/nodes/f" + key + "_full.png");
            }
        }

        function convertLinkTooltipVisible(data) {
            var from = data.from
            var to = data.to
            var text = data.text
            if (from == "Unknown" || to == "Unknown" || text != null) return false;
            else return true;
        }

        function convertLinkImage(data) {
            var from = data.from
            var to = data.to
            var text = data.text
            if (from == "Unknown" || to == "Unknown" || text != null) return null;
            else return "imgs/links/f" + from + "-f" + to + "_crop.png";
        }

        function convertLinkFullImage(data) {
            var from = data.from
            var to = data.to
            var text = data.text
            if (from == "Unknown" || to == "Unknown" || text != null) return null;
            else return "imgs/links/f" + from + "-f" + to + "_full.png";
        }

        function convertLinkURL(data) {
            var from = data.from
            var to = data.to
            var text = data.text
            if (from == "Unknown" || to == "Unknown" || text != null) return null;
            else return function() {
                window.open("imgs/links/f" + from + "-f" + to + "_full.png");
            }
        }

        function convertNodeStroke(data) {
            if (data.highlighted) return "red";
            if (data.tag == "start" || data.tag == "end") return "green";
            else return "white";
        }

        function inverter(x) {
            return !x;
        }

        // Call init on page load
        window.addEventListener('DOMContentLoaded', init);
    </script>
</head>

<body>
    <div id="sample">
        <div style="width: 100%; display: flex; justify-content: space-between">
            <div id="myDiagramDiv" style="flex-grow: 1; height: 1000px; border: solid 1px black"></div>
        </div>
    </div>
</body>
</html>
