<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <title>20220208_lee_raw_enterSOAP_all</title>
    <script src="https://unpkg.com/gojs/release/go.js"
            integrity="sha384-jmuxDbgzIVoUX1pMPi24Oly2BcGouO9gwBb2+VdbrIyDqkxGM4zbHzYPf9DUR/da"
            crossorigin="anonymous"></script>
    <script type="text/javascript" src="map.js"></script>

    <script id="code">
        const map_dict = map;
        var seq_name = "20220208_lee_raw_enterSOAP_all";

        var param;
        var pos = document.URL.indexOf("?");
        if (pos != -1) {
            param = document.URL.substring(pos + 1);
            console.log("Parameters: " + param);
        }
        else param = "";

        function init() {
            var $ = go.GraphObject.make;
            var layoutSpacing = new go.Size(192, 108);
            var myDiagram = $(go.Diagram, 'myDiagramDiv', {
                layout: $(go.ForceDirectedLayout),
                // layout: $(go.GridLayout, { spacing: layoutSpacing } ),
                mouseDrop: function(e) { finishDrop(e, null); },
                "undoManager.isEnabled": true,
                "toolManager.hoverDelay": 100
            });

            // Hide tooltip when dragging
            var draggingTool = myDiagram.toolManager.draggingTool;
            draggingTool.doActivate = function() {
                myDiagram.toolManager.hideToolTip();
                go.DraggingTool.prototype.doActivate.call(draggingTool);
            }

            // Expand groups with only one immediate children
            function autoExpand() {
                myDiagram.nodes.each(function(n) {
                    if (n instanceof go.Group) {
                        if (n.data.key == "Unknown") { n.collapseSubGraph(); return; }
                        if (n.data.level == 0) { n.expandSubGraph(); return; }
                        var memberCount = 0;
                        n.memberParts.each(function(m) {
                            if (m instanceof go.Group || m instanceof go.Node) memberCount += 1;
                        })
                        if (memberCount <= 1) n.expandSubGraph();
                        else n.collapseSubGraph();
                    }
                });
            }

            // Highlight a Group that the selection may be dropped into
            function highlightGroup(e, grp, show) {
                if (!grp) return;
                e.handled = true;
                if (show) {
                    // cannot depend on the grp.diagram.selection in the case of external drag-and-drops;
                    // instead depend on the DraggingTool.draggedParts or .copiedParts
                    var tool = grp.diagram.toolManager.draggingTool;
                    var map = tool.draggedParts || tool.copiedParts;  // this is a Map
                    // now we can check to see if the Group will accept membership of the dragged Parts
                    if (grp.canAddMembers(map.toKeySet())) {
                        grp.isHighlighted = true;
                        return;
                    }
                }
                grp.isHighlighted = false;
            }

            // Highlight a node and its connected links by key
            function highlightNodeByKey(key) {
                var node = myDiagram.findNodeForKey(key);
                // for each Link coming out of the Node, set Link.isHighlighted
                node.findLinksConnected().each(function(l) { l.isHighlighted = true; });
                // set node as highlighted
                myDiagram.model.set(node.data, "highlighted", true);

                // set subgroup containing this node as highlighted
                var subgroup = myDiagram.findNodeForKey(node.data.group)
                myDiagram.model.set(subgroup.data, "highlighted", true);

                function flash() {
                    myDiagram.model.set(node.data, "highlighted", !node.data.highlighted);
                    myDiagram.model.set(subgroup.data, "highlighted", !subgroup.data.highlighted);
                }
                function loop() { setTimeout(function() { flash(); loop(); }, 500); }
                loop();
            }

            // Upon a drop onto a Group, we try to add the selection as members of the Group.
            // Upon a drop onto the background, or onto a top-level Node, make selection top-level.
            // If this is OK, we're done; otherwise we cancel the operation to rollback everything.
            function finishDrop(e, grp) {
                var ok = (grp !== null
                    ? grp.addMembers(grp.diagram.selection, true)
                    : e.diagram.commandHandler.addTopLevelParts(e.diagram.selection, true));
                if (!ok) e.diagram.currentTool.doCancel();
            }

            function mergeNode(e, node) {
                var newnode = e.diagram.selection.first();
                while (node.findLinksConnected().first()) {
                    var link = node.findLinksConnected().first()
                    var fromnode = link.fromNode;
                    var tonode = link.toNode;
                    var linkText = link.data.text;
                    var linkSize = link.data.size;
                    node.diagram.model.removeLinkData(link.data);
                    if (fromnode.key === tonode.key) {
                        node.diagram.model.addLinkData( { from: newnode.key, to: newnode.key, text: linkText, size: linkSize } );
                    } else if (fromnode.key === node.key) {
                        node.diagram.model.addLinkData( { from: newnode.key, to: tonode.key, text: linkText, size: linkSize } );
                    } else if (tonode.key === node.key) {
                        node.diagram.model.addLinkData( { from: fromnode.key, to: newnode.key, text: linkText, size: linkSize } );
                    }
                }
                myDiagram.remove(node);
            }

            function mergeGroup(selectedGroup, newGroup) {
                newGroup.addMembers(selectedGroup.memberParts, true);
                myDiagram.remove(selectedGroup)
            }

            myDiagram.nodeTemplate = $(go.Node, 'Auto',
                {
                    mouseDrop: function(e, node) { mergeNode(e, node); },
                    toolTip:
                    $("ToolTip",
                        $(go.Panel, "Vertical",
                        $(go.Picture, { margin: 3, width: 768, height: 432 },
                            new go.Binding("source", "key", convertNodeFullImage)),
                        )
                    )  // end Adornment
                },
                new go.Binding("click", "key", convertNodeURL),
                $(go.Shape, "Rectangle", { fill: null, strokeWidth: 6 },
                    new go.Binding("stroke", "", convertNodeStroke),
                ),
                $(go.Picture,
                    { width: 192, height: 108, background: null, imageStretch: go.GraphObject.Uniform },
                    new go.Binding("source", "key", convertNodeImage)
                )
            );

            myDiagram.groupTemplate = $(go.Group, "Auto",
                {
                    layout: $(go.ForceDirectedLayout),
                    // layout: $(go.GridLayout, { spacing: layoutSpacing } ),
                    ungroupable: true,
                    // highlight when dragging into the Group
                    mouseDragEnter: function(e, grp, prev) { highlightGroup(e, grp, true); },
                    mouseDragLeave: function(e, grp, next) { highlightGroup(e, grp, false); },
                    computesBoundsAfterDrag: true,
                    // when the selection is dropped into a Group, add the selected Parts into that Group;
                    // if it fails, cancel the tool, rolling back any changes
                    mouseDrop: function(e, grp) {
                        var selectedGroup = e.diagram.selection.first();
                        if (selectedGroup instanceof go.Group) {
                            if (selectedGroup.data.level == grp.data.level) { mergeGroup(selectedGroup, grp); }
                            else if (selectedGroup.data.level > grp.data.level) { finishDrop(e, grp); }
                            else { e.diagram.currentTool.doCancel(); }
                        } else if (selectedGroup instanceof go.Node) {
                            finishDrop(e, grp);
                        };
                    },
                    handlesDragDropForMembers: true,  // don't need to define handlers on member Nodes and Links
                    // Groups containing Groups lay out their members horizontally
                    toolTip:
                    $("ToolTip",
                        // new go.Binding("visible", "isSubGraphExpanded", inverter).ofObject(), // TODO: visible only when collapsed
                        new go.Binding("visible", "level", convertLevelVisible),
                        $(go.Panel, "Vertical",
                        $(go.Picture, { margin: 3, width: 768, height: 432 },
                            new go.Binding("source", "preview", convertNodeFullImage)),
                        )
                    )  // end Adornment
                },
                new go.Binding("background", "isHighlighted", function(h) {
                    return h ? "rgba(255,0,0,0.2)" : "transparent";
                }).ofObject(),
                $(go.Shape, "Rectangle",
                    { fill: null, strokeWidth: 2 },
                    new go.Binding("stroke", "", convertGroupColor)
                ),
                $(go.Panel, "Vertical",  // title above Placeholder
                    $(go.Panel, "Horizontal",  // button next to TextBlock
                        { stretch: go.GraphObject.Horizontal },
                        new go.Binding("background", "", convertGroupColor),
                        $("SubGraphExpanderButton",
                            { alignment: go.Spot.Right, margin: 5 } ),
                        $(go.TextBlock,
                            {
                                alignment: go.Spot.Left,
                                editable: true,
                                margin: 5,
                                font: "bold 16px sans-serif",
                                opacity: 0.75,  // allow some color to show through
                                stroke: "#404040"
                            },
                            new go.Binding("text", "key").makeTwoWay()
                        )
                    ),  // end Horizontal Panel
                    $(go.Placeholder,
                        { padding: 5, alignment: go.Spot.TopLeft } )
                )  // end Vertical Panel
            );

            myDiagram.linkTemplate = $(go.Link,
                {
                    curve: go.Link.Bezier,
                    toolTip:
                    $("ToolTip",
                        // tooltip visible only when link is click event
                        new go.Binding("visible", "", convertLinkTooltipVisible),
                        $(go.Panel, "Vertical",
                        $(go.Picture, { margin: 3, width: 768, height: 432 },
                            new go.Binding("source", "", convertLinkFullImage)),
                        )
                    )  // end Adornment
                },
                new go.Binding("click", "", convertLinkURL),
                $(go.Shape,
                    // the Shape.stroke color depends on whether Link.isHighlighted is true
                    new go.Binding("stroke", "isHighlighted", function(h) { return h ? "red" : "black"; }).ofObject(),
                    // the Shape.strokeWidth depends on whether Link.isHighlighted is true
                    new go.Binding("strokeWidth", "isHighlighted", function(h) { return h ? 3 : 1; }).ofObject()
                ),
                $(go.Shape,
                    { toArrow: "Standard", strokeWidth: 0 },
                    // the Shape.fill color depends on whether Link.isHighlighted is true
                    new go.Binding("fill", "isHighlighted", function(h) { return h ? "red" : "black"; }).ofObject(),
                    new go.Binding("scale", "isHighlighted", function(h) { return h ? 2 : 1; }).ofObject(),
                ),
                $(go.Panel, "Auto",
                    $(go.Shape, "Rectangle",
                        { fill: "white", stroke: "lightgray" },
                        new go.Binding("visible", "text", function(text) { return (text != null); }),
                    ),
                    $(go.TextBlock, { margin: 3, opacity: 1., font: "bold 14pt Courier New" },
                        new go.Binding("text", "text")),
                    $(go.Picture, { segmentOffset: new go.Point(0, 0) },
                        { width: 192, height: 35, background: null, imageStretch: go.GraphObject.Uniform },
                        new go.Binding("source", "", convertLinkImage),
                    ),
                )
            );

            myDiagram.model = new go.GraphLinksModel([
                { key: "000005", group: "CC_Patients-00", tag: null },
                { key: "CC_Patients-00", preview: "000005", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "CC_Patients", preview: "000005", isGroup: true, level: 0 },
                { key: "000006", group: "CC_Patients-01", tag: null },
                { key: "CC_Patients-01", preview: "000006", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000007", group: "CC_Patients-02", tag: null },
                { key: "CC_Patients-02", preview: "000007", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000026", group: "CC_Patients-03", tag: null },
                { key: "CC_Patients-03", preview: "000026", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000027", group: "CC_Patients-04", tag: null },
                { key: "CC_Patients-04", preview: "000027", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000041", group: "CC_Patients-05", tag: null },
                { key: "CC_Patients-05", preview: "000041", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000042", group: "CC_Patients-06", tag: null },
                { key: "CC_Patients-06", preview: "000042", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000107", group: "CC_Patients-07", tag: null },
                { key: "CC_Patients-07", preview: "000107", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000108", group: "CC_Patients-08", tag: null },
                { key: "CC_Patients-08", preview: "000108", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000109", group: "CC_Patients-09", tag: null },
                { key: "CC_Patients-09", preview: "000109", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000110", group: "CC_Patients-10", tag: null },
                { key: "CC_Patients-10", preview: "000110", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000159", group: "CC_Patients-11", tag: null },
                { key: "CC_Patients-11", preview: "000159", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000160", group: "CC_Patients-12", tag: null },
                { key: "CC_Patients-12", preview: "000160", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000161", group: "CC_Patients-13", tag: null },
                { key: "CC_Patients-13", preview: "000161", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000184", group: "CC_Patients-14", tag: null },
                { key: "CC_Patients-14", preview: "000184", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000185", group: "CC_Patients-15", tag: null },
                { key: "CC_Patients-15", preview: "000185", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000186", group: "CC_Patients-16", tag: null },
                { key: "CC_Patients-16", preview: "000186", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000277", group: "CC_Patients-17", tag: null },
                { key: "CC_Patients-17", preview: "000277", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000284", group: "CC_Patients-18", tag: null },
                { key: "CC_Patients-18", preview: "000284", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000285", group: "CC_Patients-19", tag: null },
                { key: "CC_Patients-19", preview: "000285", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000286", group: "CC_Patients-20", tag: null },
                { key: "CC_Patients-20", preview: "000286", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000300", group: "CC_Patients-21", tag: null },
                { key: "CC_Patients-21", preview: "000300", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000301", group: "CC_Patients-22", tag: null },
                { key: "CC_Patients-22", preview: "000301", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000302", group: "CC_Patients-23", tag: null },
                { key: "CC_Patients-23", preview: "000302", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000307", group: "CC_Patients-24", tag: null },
                { key: "CC_Patients-24", preview: "000307", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000328", group: "CC_Patients-25", tag: null },
                { key: "CC_Patients-25", preview: "000328", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000329", group: "CC_Patients-26", tag: null },
                { key: "CC_Patients-26", preview: "000329", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000330", group: "CC_Patients-27", tag: null },
                { key: "CC_Patients-27", preview: "000330", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000336", group: "CC_Patients-28", tag: null },
                { key: "CC_Patients-28", preview: "000336", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000337", group: "CC_Patients-29", tag: null },
                { key: "CC_Patients-29", preview: "000337", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000358", group: "CC_Patients-30", tag: null },
                { key: "CC_Patients-30", preview: "000358", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000359", group: "CC_Patients-31", tag: null },
                { key: "CC_Patients-31", preview: "000359", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000360", group: "CC_Patients-32", tag: null },
                { key: "CC_Patients-32", preview: "000360", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000368", group: "CC_Patients-33", tag: null },
                { key: "CC_Patients-33", preview: "000368", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000369", group: "CC_Patients-34", tag: null },
                { key: "CC_Patients-34", preview: "000369", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000370", group: "CC_Patients-35", tag: null },
                { key: "CC_Patients-35", preview: "000370", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000416", group: "CC_Patients-36", tag: null },
                { key: "CC_Patients-36", preview: "000416", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000417", group: "CC_Patients-37", tag: null },
                { key: "CC_Patients-37", preview: "000417", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000451", group: "CC_Patients-38", tag: null },
                { key: "CC_Patients-38", preview: "000451", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000452", group: "CC_Patients-39", tag: null },
                { key: "CC_Patients-39", preview: "000452", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000453", group: "CC_Patients-40", tag: null },
                { key: "CC_Patients-40", preview: "000453", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000464", group: "CC_Patients-41", tag: null },
                { key: "CC_Patients-41", preview: "000464", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000466", group: "CC_Patients-42", tag: null },
                { key: "CC_Patients-42", preview: "000466", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000524", group: "CC_Patients-43", tag: null },
                { key: "CC_Patients-43", preview: "000524", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000525", group: "CC_Patients-44", tag: null },
                { key: "CC_Patients-44", preview: "000525", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000526", group: "CC_Patients-45", tag: null },
                { key: "CC_Patients-45", preview: "000526", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000527", group: "CC_Patients-46", tag: null },
                { key: "CC_Patients-46", preview: "000527", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000529", group: "CC_Patients-47", tag: null },
                { key: "CC_Patients-47", preview: "000529", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000555", group: "CC_Patients-48", tag: null },
                { key: "CC_Patients-48", preview: "000555", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000556", group: "CC_Patients-49", tag: null },
                { key: "CC_Patients-49", preview: "000556", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000557", group: "CC_Patients-50", tag: null },
                { key: "CC_Patients-50", preview: "000557", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000577", group: "CC_Patients-51", tag: null },
                { key: "CC_Patients-51", preview: "000577", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000578", group: "CC_Patients-52", tag: null },
                { key: "CC_Patients-52", preview: "000578", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000579", group: "CC_Patients-53", tag: null },
                { key: "CC_Patients-53", preview: "000579", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000580", group: "CC_Patients-54", tag: null },
                { key: "CC_Patients-54", preview: "000580", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000651", group: "CC_Patients-55", tag: null },
                { key: "CC_Patients-55", preview: "000651", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000652", group: "CC_Patients-56", tag: null },
                { key: "CC_Patients-56", preview: "000652", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000719", group: "CC_Patients-57", tag: null },
                { key: "CC_Patients-57", preview: "000719", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000720", group: "CC_Patients-58", tag: null },
                { key: "CC_Patients-58", preview: "000720", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000772", group: "CC_Patients-59", tag: null },
                { key: "CC_Patients-59", preview: "000772", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000773", group: "CC_Patients-60", tag: null },
                { key: "CC_Patients-60", preview: "000773", isGroup: true, level: 1, group: "CC_Patients" },
                { key: "000008", group: "CC_Soap-00", tag: null },
                { key: "CC_Soap-00", preview: "000008", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "CC_Soap", preview: "000008", isGroup: true, level: 0 },
                { key: "000028", group: "CC_Soap-13", tag: null },
                { key: "CC_Soap-13", preview: "000028", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000043", group: "CC_Soap-21", tag: null },
                { key: "CC_Soap-21", preview: "000043", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000111", group: "CC_Soap-63", tag: null },
                { key: "CC_Soap-63", preview: "000111", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000162", group: "CC_Soap-81", tag: null },
                { key: "CC_Soap-81", preview: "000162", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000187", group: "CC_Soap-102", tag: null },
                { key: "CC_Soap-102", preview: "000187", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000278", group: "CC_Soap-150", tag: null },
                { key: "CC_Soap-150", preview: "000278", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000287", group: "CC_Soap-154", tag: null },
                { key: "CC_Soap-154", preview: "000287", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000306", group: "CC_Soap-162", tag: null },
                { key: "CC_Soap-162", preview: "000306", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000316", group: "CC_Soap-163", tag: null },
                { key: "CC_Soap-163", preview: "000316", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000331", group: "CC_Soap-166", tag: null },
                { key: "CC_Soap-166", preview: "000331", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000338", group: "CC_Soap-170", tag: null },
                { key: "CC_Soap-170", preview: "000338", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000361", group: "CC_Soap-181", tag: null },
                { key: "CC_Soap-181", preview: "000361", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000378", group: "CC_Soap-183", tag: null },
                { key: "CC_Soap-183", preview: "000378", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000418", group: "CC_Soap-201", tag: null },
                { key: "CC_Soap-201", preview: "000418", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000461", group: "CC_Soap-215", tag: null },
                { key: "CC_Soap-215", preview: "000461", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000467", group: "CC_Soap-217", tag: null },
                { key: "CC_Soap-217", preview: "000467", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000530", group: "CC_Soap-248", tag: null },
                { key: "CC_Soap-248", preview: "000530", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000558", group: "CC_Soap-254", tag: null },
                { key: "CC_Soap-254", preview: "000558", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000581", group: "CC_Soap-271", tag: null },
                { key: "CC_Soap-271", preview: "000581", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000653", group: "CC_Soap-329", tag: null },
                { key: "CC_Soap-329", preview: "000653", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000721", group: "CC_Soap-369", tag: null },
                { key: "CC_Soap-369", preview: "000721", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000782", group: "CC_Soap-401", tag: null },
                { key: "CC_Soap-401", preview: "000782", isGroup: true, level: 1, group: "CC_Soap" },
                { key: "000303", group: "癌症篩檢提示系統-00", tag: null },
                { key: "癌症篩檢提示系統-00", preview: "000303", isGroup: true, level: 1, group: "癌症篩檢提示系統" },
                { key: "癌症篩檢提示系統", preview: "000303", isGroup: true, level: 0 },
                { key: "000304", group: "癌症篩檢提示系統-01", tag: null },
                { key: "癌症篩檢提示系統-01", preview: "000304", isGroup: true, level: 1, group: "癌症篩檢提示系統" },
                { key: "000305", group: "TOCC門診疫病篩檢單-00", tag: null },
                { key: "TOCC門診疫病篩檢單-00", preview: "000305", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "TOCC門診疫病篩檢單", preview: "000305", isGroup: true, level: 0 },
                { key: "000308", group: "TOCC門診疫病篩檢單-01", tag: null },
                { key: "TOCC門診疫病篩檢單-01", preview: "000308", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000309", group: "TOCC門診疫病篩檢單-02", tag: null },
                { key: "TOCC門診疫病篩檢單-02", preview: "000309", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000310", group: "TOCC門診疫病篩檢單-03", tag: null },
                { key: "TOCC門診疫病篩檢單-03", preview: "000310", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000311", group: "TOCC門診疫病篩檢單-04", tag: null },
                { key: "TOCC門診疫病篩檢單-04", preview: "000311", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000312", group: "TOCC門診疫病篩檢單-05", tag: null },
                { key: "TOCC門診疫病篩檢單-05", preview: "000312", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000313", group: "TOCC門診疫病篩檢單-06", tag: null },
                { key: "TOCC門診疫病篩檢單-06", preview: "000313", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000314", group: "TOCC門診疫病篩檢單-07", tag: null },
                { key: "TOCC門診疫病篩檢單-07", preview: "000314", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000315", group: "TOCC門診疫病篩檢單-08", tag: null },
                { key: "TOCC門診疫病篩檢單-08", preview: "000315", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000371", group: "TOCC門診疫病篩檢單-09", tag: null },
                { key: "TOCC門診疫病篩檢單-09", preview: "000371", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000372", group: "TOCC門診疫病篩檢單-10", tag: null },
                { key: "TOCC門診疫病篩檢單-10", preview: "000372", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000373", group: "TOCC門診疫病篩檢單-11", tag: null },
                { key: "TOCC門診疫病篩檢單-11", preview: "000373", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000374", group: "TOCC門診疫病篩檢單-12", tag: null },
                { key: "TOCC門診疫病篩檢單-12", preview: "000374", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000375", group: "TOCC門診疫病篩檢單-13", tag: null },
                { key: "TOCC門診疫病篩檢單-13", preview: "000375", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000376", group: "TOCC門診疫病篩檢單-14", tag: null },
                { key: "TOCC門診疫病篩檢單-14", preview: "000376", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000377", group: "TOCC門診疫病篩檢單-15", tag: null },
                { key: "TOCC門診疫病篩檢單-15", preview: "000377", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000454", group: "TOCC門診疫病篩檢單-16", tag: null },
                { key: "TOCC門診疫病篩檢單-16", preview: "000454", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000455", group: "TOCC門診疫病篩檢單-17", tag: null },
                { key: "TOCC門診疫病篩檢單-17", preview: "000455", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000456", group: "TOCC門診疫病篩檢單-18", tag: null },
                { key: "TOCC門診疫病篩檢單-18", preview: "000456", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000457", group: "TOCC門診疫病篩檢單-19", tag: null },
                { key: "TOCC門診疫病篩檢單-19", preview: "000457", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000458", group: "TOCC門診疫病篩檢單-20", tag: null },
                { key: "TOCC門診疫病篩檢單-20", preview: "000458", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000459", group: "TOCC門診疫病篩檢單-21", tag: null },
                { key: "TOCC門診疫病篩檢單-21", preview: "000459", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000460", group: "TOCC門診疫病篩檢單-22", tag: null },
                { key: "TOCC門診疫病篩檢單-22", preview: "000460", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000774", group: "TOCC門診疫病篩檢單-23", tag: null },
                { key: "TOCC門診疫病篩檢單-23", preview: "000774", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000775", group: "TOCC門診疫病篩檢單-24", tag: null },
                { key: "TOCC門診疫病篩檢單-24", preview: "000775", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000776", group: "TOCC門診疫病篩檢單-25", tag: null },
                { key: "TOCC門診疫病篩檢單-25", preview: "000776", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000777", group: "TOCC門診疫病篩檢單-26", tag: null },
                { key: "TOCC門診疫病篩檢單-26", preview: "000777", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000778", group: "TOCC門診疫病篩檢單-27", tag: null },
                { key: "TOCC門診疫病篩檢單-27", preview: "000778", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000779", group: "TOCC門診疫病篩檢單-28", tag: null },
                { key: "TOCC門診疫病篩檢單-28", preview: "000779", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000780", group: "TOCC門診疫病篩檢單-29", tag: null },
                { key: "TOCC門診疫病篩檢單-29", preview: "000780", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000781", group: "TOCC門診疫病篩檢單-30", tag: null },
                { key: "TOCC門診疫病篩檢單-30", preview: "000781", isGroup: true, level: 1, group: "TOCC門診疫病篩檢單" },
                { key: "000465", group: "重點提示-00", tag: null },
                { key: "重點提示-00", preview: "000465", isGroup: true, level: 1, group: "重點提示" },
                { key: "重點提示", preview: "000465", isGroup: true, level: 0 },
                { key: "000528", group: "重點提示-01", tag: null },
                { key: "重點提示-01", preview: "000528", isGroup: true, level: 1, group: "重點提示" },
        ], [
                { from: "000005", to: "000006", text: null },
                { from: "000006", to: "000007", text: null },
                { from: "000007", to: "000008", text: null },
                { from: "000026", to: "000027", text: null },
                { from: "000027", to: "000028", text: null },
                { from: "000041", to: "000042", text: null },
                { from: "000042", to: "000043", text: null },
                { from: "000107", to: "000108", text: null },
                { from: "000108", to: "000109", text: null },
                { from: "000109", to: "000110", text: null },
                { from: "000110", to: "000111", text: null },
                { from: "000159", to: "000160", text: null },
                { from: "000160", to: "000161", text: null },
                { from: "000161", to: "000162", text: null },
                { from: "000184", to: "000185", text: null },
                { from: "000185", to: "000186", text: null },
                { from: "000186", to: "000187", text: null },
                { from: "000277", to: "000278", text: null },
                { from: "000284", to: "000285", text: null },
                { from: "000285", to: "000286", text: null },
                { from: "000286", to: "000287", text: null },
                { from: "000300", to: "000301", text: null },
                { from: "000301", to: "000302", text: null },
                { from: "000302", to: "000303", text: null },
                { from: "000303", to: "000304", text: null },
                { from: "000304", to: "000305", text: null },
                { from: "000305", to: "000306", text: null },
                { from: "000307", to: "000308", text: null },
                { from: "000308", to: "000309", text: null },
                { from: "000309", to: "000310", text: null },
                { from: "000310", to: "000311", text: null },
                { from: "000311", to: "000312", text: null },
                { from: "000312", to: "000313", text: null },
                { from: "000313", to: "000314", text: null },
                { from: "000314", to: "000315", text: null },
                { from: "000315", to: "000316", text: null },
                { from: "000328", to: "000329", text: null },
                { from: "000329", to: "000330", text: null },
                { from: "000330", to: "000331", text: null },
                { from: "000336", to: "000337", text: null },
                { from: "000337", to: "000338", text: null },
                { from: "000358", to: "000359", text: null },
                { from: "000359", to: "000360", text: null },
                { from: "000360", to: "000361", text: null },
                { from: "000368", to: "000369", text: null },
                { from: "000369", to: "000370", text: null },
                { from: "000370", to: "000371", text: null },
                { from: "000371", to: "000372", text: null },
                { from: "000372", to: "000373", text: null },
                { from: "000373", to: "000374", text: null },
                { from: "000374", to: "000375", text: null },
                { from: "000375", to: "000376", text: null },
                { from: "000376", to: "000377", text: null },
                { from: "000377", to: "000378", text: null },
                { from: "000416", to: "000417", text: null },
                { from: "000417", to: "000418", text: null },
                { from: "000451", to: "000452", text: null },
                { from: "000452", to: "000453", text: null },
                { from: "000453", to: "000454", text: null },
                { from: "000454", to: "000455", text: null },
                { from: "000455", to: "000456", text: null },
                { from: "000456", to: "000457", text: null },
                { from: "000457", to: "000458", text: null },
                { from: "000458", to: "000459", text: null },
                { from: "000459", to: "000460", text: null },
                { from: "000460", to: "000461", text: null },
                { from: "000464", to: "000465", text: null },
                { from: "000465", to: "000466", text: null },
                { from: "000466", to: "000467", text: null },
                { from: "000524", to: "000525", text: null },
                { from: "000525", to: "000526", text: null },
                { from: "000526", to: "000527", text: null },
                { from: "000527", to: "000528", text: null },
                { from: "000528", to: "000529", text: null },
                { from: "000529", to: "000530", text: null },
                { from: "000555", to: "000556", text: null },
                { from: "000556", to: "000557", text: null },
                { from: "000557", to: "000558", text: null },
                { from: "000577", to: "000578", text: null },
                { from: "000578", to: "000579", text: null },
                { from: "000579", to: "000580", text: null },
                { from: "000580", to: "000581", text: null },
                { from: "000651", to: "000652", text: null },
                { from: "000652", to: "000653", text: null },
                { from: "000719", to: "000720", text: null },
                { from: "000720", to: "000721", text: null },
                { from: "000772", to: "000773", text: null },
                { from: "000773", to: "000774", text: null },
                { from: "000774", to: "000775", text: null },
                { from: "000775", to: "000776", text: null },
                { from: "000776", to: "000777", text: null },
                { from: "000777", to: "000778", text: null },
                { from: "000778", to: "000779", text: null },
                { from: "000779", to: "000780", text: null },
                { from: "000780", to: "000781", text: null },
                { from: "000781", to: "000782", text: null },
            ]);

            autoExpand();
            if (param != "") highlightNodeByKey(param);
        }

        function convertLevelVisible(level) {
            if (level == 1) { return true }
            else if (level == 0) { return false }
            else { return false }
        }

        function convertGroupColor(data) {
            if (data.highlighted) { return "red" }
            if (data.level == 0) { return "#33D3E5" }
            else if (data.level == 1) { return "#FFDD33" }
            else if (data.level == 2) { return "#ACE600" }
            else { return "#000000" }
        }

        function convertNodeImage(key) {
            if (key == null) return "";
            else return "imgs/nodes/f" + key + "_node.png";
        }

        function convertNodeFullImage(key) {
            if (key == null) return "";
            else return "imgs/nodes/f" + key + "_full.png";
        }

        function convertNodeURL(key) {
            if (key == null) return null;
            if (map_dict[parseInt(key)] && seq_name.includes("_all")) return function() {
                window.open(map_dict[parseInt(key)][0] + ".html");
            }
            else return function() {
                window.open("imgs/nodes/f" + key + "_full.png");
            }
        }

        function convertLinkTooltipVisible(data) {
            var from = data.from
            var to = data.to
            var text = data.text
            if (from == "Unknown" || to == "Unknown" || text != null) return false;
            else return true;
        }

        function convertLinkImage(data) {
            var from = data.from
            var to = data.to
            var text = data.text
            if (from == "Unknown" || to == "Unknown" || text != null) return null;
            else return "imgs/links/f" + from + "-f" + to + "_crop.png";
        }

        function convertLinkFullImage(data) {
            var from = data.from
            var to = data.to
            var text = data.text
            if (from == "Unknown" || to == "Unknown" || text != null) return null;
            else return "imgs/links/f" + from + "-f" + to + "_full.png";
        }

        function convertLinkURL(data) {
            var from = data.from
            var to = data.to
            var text = data.text
            if (from == "Unknown" || to == "Unknown" || text != null) return null;
            else return function() {
                window.open("imgs/links/f" + from + "-f" + to + "_full.png");
            }
        }

        function convertNodeStroke(data) {
            if (data.highlighted) return "red";
            if (data.tag == "start" || data.tag == "end") return "green";
            else return "white";
        }

        function inverter(x) {
            return !x;
        }

        // Call init on page load
        window.addEventListener('DOMContentLoaded', init);
    </script>
</head>

<body>
    <div id="sample">
        <div style="width: 100%; display: flex; justify-content: space-between">
            <div id="myDiagramDiv" style="flex-grow: 1; height: 1000px; border: solid 1px black"></div>
        </div>
    </div>
</body>
</html>
